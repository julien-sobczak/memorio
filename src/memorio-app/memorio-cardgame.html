<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-a11y-keys/iron-a11y-keys.html">
<link rel="import" href="/src/memorio-app/memorio-deck.html">

<dom-module id="memorio-cardgame">
  <template>
    <style>
      :host {
        display: block;
      }
      memorio-deck {
        display: inline-block;
      }
    </style>

    <iron-a11y-keys keys="up" target="[[target]]" on-keys-pressed="rollUp"></iron-a11y-keys>
    <iron-a11y-keys keys="down" target="[[target]]" on-keys-pressed="rollDown"></iron-a11y-keys>
    <iron-a11y-keys keys="enter" target="[[target]]" on-keys-pressed="pop"></iron-a11y-keys>
    <!--
    <iron-a11y-keys keys="s S" target="[[target]]" on-keys-pressed="shuffle"></iron-a11y-keys>
    <iron-a11y-keys keys="p P" target="[[target]]" on-keys-pressed="pop"></iron-a11y-keys>
    -->

    <memorio-deck id="deckSource">
      <memorio-card suit="spade" rank="seven"></memorio-card>
      <memorio-card suit="heart" rank="six"></memorio-card>
      <memorio-card suit="heart" rank="as"></memorio-card>
      <memorio-card suit="club" rank="as"></memorio-card>
      <memorio-card suit="diamond" rank="jack"></memorio-card>
    </memorio-deck>

    <memorio-deck id="deckDestination">
      <memorio-card suit="spade" rank="ten"></memorio-card>
    </memorio-deck>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class CardGame extends Polymer.Element {
      static get is() { return 'memorio-cardgame'; }

      static get properties() {
        return {
          hidden: {
            type: Boolean,
            value: false
          },
          target: {
            type: Object,
            value: function() {
              return document.body;
            }
          }
        };
      }

      constructor() {
        super();
      }

      ready() {
        super.ready();
      }

      rollUp(event) {
        this.$.deckSource.rollUp();
      }

      rollDown(event) {
        this.$.deckSource.rollDown();
      }

      pop(event) {
        let card = this.$.deckSource.pop();
        this.$.deckDestination.push(card);
      }

    }

    window.customElements.define(CardGame.is, CardGame);
  </script>
</dom-module>
