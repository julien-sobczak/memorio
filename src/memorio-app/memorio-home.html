<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/src/memorio-app/shared-styles.html">
<link rel="import" href="/src/memorio-app/memorio-footer.html">

<dom-module id="memorio-home">
  <template>
    <style include="shared-styles">

      * {
        box-sizing: border-box;
      }

      header {
        position: relative;
        width: 100%;
        background-color: #FFE100;
        text-align: center;
      }

      header img#logo {
        margin-top: 100px;
        width: 550px;
      }
      header #tagline {
        width: 550px;
        margin: 0 auto 20px;
        text-align: left;
        font-weight: 400;
        font-size: 36px;
      }
      header img#illustration {
        margin-top: 100px;
        width: 1250px;
        margin-bottom: 200px;
      }
      header #signInAccess {
        position: absolute;
        top: 50px;
        right: 100px;
        font-size: 1.5em;
      }
      header #signInAccess a {
        text-decoration: none;
        color: black;
        padding: 10px;
        border: 1px solid black;
        border-radius: 5px;
      }


      section .container {
        position: relative;
        width: 1200px;
        margin: 0 auto;
        padding; 50px 25px;
      }

      section img {
        position: absolute;
        right: 0;
      }

      p {
        font-size: 35pt;
      }

      #history {
        position: relative;
        background-color: gray;
        color: white;
        height: 650px;
      }

      p.headline {
        position: absolute;
        height: 70px;
        width: 80%;
        left: 10%;
        right: 10%;
        padding: 15px;
        text-align: center;
        top: -35px;
        margin: 0 auto;
        background-color: black;
        color: white;
        border-radius: 35px;
        font-size: 25pt;
      }
      #history p:nth-child(2) {
        position: absolute;
        width: 50%;
        left: 75px;
        top: 150px;
        font-size: 30pt;
      }
      #history p:nth-child(4) {
        position: absolute;
        width: 40%;
        top: 300px;
        left: 75px;
        font-size: 18pt;
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 20px;
        padding: 50px;
      }

      #history img {
        top: 175px;
        right: 75px;
        width: 350px;
        height: 350px;
      }

      #association {
        height: 700px;
        background-color: #CCC;
      }
      #association p#before, #association p#after {
        font-size: 30pt;
        width: 400px;
      }
      #association p#before {
        position: absolute;
        top: 75px;
        left: 75px;
        text-align: left;
      }
      #association p#after {
        position: absolute;
        top: 75px;
        right: 75px;
        text-align: right;
      }
      #association img {
        width: 350px;
        height: 350px;
      }
      #association img#before_pic {
        position: absolute;
        left: 75px;
        top: 200px;
      }
      #association img#after_pic {
        position: absolute;
        right: 75px;
        top: 200px;
      }

      #origin {
        background-color: #FFE100;
        color: black;
      }

      #origin p {
        font-size: 22pt;
        margin-bottom: 50px;
        margin-top: 50px;
        border-radius: 20px;
        background: black;
        color: #FFE100;
        padding: 15px 20px;
        line-height: 1.3;
      }
      #origin .container {
        padding: 100px 200px;
      }
      #origin .container::before {
        content: url('/images/home/quote.png');
        position: absolute;
        top: -50px;
        left: -250px;
        transform: scale(0.3);
      }
      #origin .container::after {
        content: url('/images/home/quote.png');
        position: absolute;
        bottom: -50px;
        right: -250px;
        transform: scale(0.3) rotate(180deg);
      }

      #go {
        background: white;
      }
      #go .container {
        height: 575px;
      }

      #go #browser {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 700px;
        border-radius: 9px;
        box-shadow: 0px -5px 15px grey;
      }

      #go #screenshot {
        position: absolute;
        bottom: 30px;
        left: 0;
        width: 700px;
      }

      #go p {
        position: absolute;
        width: 40%;
        text-align: center;
        top: 100px;
        right: 0;
      }

      #go #buttons {
        position: absolute;
        width: 40%;
        text-align: center;
        top: 300px;
        right: 0;
      }

      #go #buttons a {
        text-decoration: none;
      }


      memorio-footer {
        margin-top: -30px; /* Required to hide the shadow of the screenshot */
        position: absolute;
        left: 0;
        right: 0;
      }

    </style>

    <firebase-auth
        id="auth"
        provider="google"
        user="{{user}}"
        signed-in="{{signedIn}}"
        on-error="handleError">
    </firebase-auth>

    <header>
      <div id="signInAccess">
        <template is="dom-if" if="{{couldSignOut}}">
          <a href="#" on-click="signOut"><iron-icon icon="lock-open" on-click="signOut"></iron-icon> Sign out</a>
        </template>
        <template is="dom-if" if="{{couldSignIn}}">
          <a href="#" on-click="signIn"><iron-icon icon="lock" on-click="signIn"></iron-icon> Sign in</a>
        </template>
      </div>
      <img id="logo" title="Memorio" src="/images/logo.png" />
      <h2 id="tagline">Your brain is amazing!</h2>
      <img id="illustration" src="/images/home/intro.png" />
    </header>

    <section id="history">
      <div class="container">
        <p class="headline">Have never being curious about the potential of your memory?</p>
        <p>Give it a chance to impress yourself!<br/>No magic. Just plain ancient tricks.</p>
        <img src="/images/home/circle-greece.png" />
        <p class="tip">Did you know techniques used by current memory champions have not changed so much since the antiquity?</p>
      </div>
    </section>

    <section id="association">
      <div class="container">
        <p class="headline">The key is to use associations</p>
        <p id="before">When you see this...</p>
        <img id="before_pic" src="/images/home/circle-numbers.png" />
        <p id="after">... Memory champions see</p>
        <img id="after_pic" src="/images/home/circle-association.png" />
      </div>
    </section>

    <section id="origin">
      <div class="container">
        <p>Compared to the origin of human, numbers have exists for such a short time. Our brain has not evolved to face it. On the contrary, writing was precisely invented to overcome this. But by leveraging our imagination, you could remember anything, simply using your memory to its best advantage.</p>

        <p>You probably already forgotten the cards seen a few seconds before, but I bet you still remember Charlie Chaplin pursued by a giant hammer. You see. It works!</p>
      </div>
    </section>

    <section id="go">
      <div class="container">
        <img id="browser" src="/images/home/browser-flat-black.png" />
        <img id="screenshot" src="/images/home/screenshot.png" />
        <p>Still curious, let's go!</p>

        <div id="buttons">
          <paper-button id="logon" on-click="signIn" raised role="button">Sign In</paper-button>
          <paper-button id="anonymous" on-click="signInAnonymously" raised role="button">Anonymous</paper-button>
          <!-- Only used to persist our preferences. No personal data will never be collected. Read more -->
        </div>
      </div>
    </section>

    <memorio-footer></memorio-footer>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class MemorioHome extends Polymer.Element {
      static get is() { return 'memorio-home'; }

      static get properties() {
        return {
          user: {
            type: Object
          },
          signedIn: {
            type: Boolean,
            observer: '_signedChanged'
          },
          couldSignIn: {
            type: Boolean,
            value: true
          },
          couldSignOut: {
            type: Boolean,
            value: false
          }
        };
      }

      ready() {
        super.ready();
      }

      signIn() {
        this.$.auth.signInWithPopup()
        .then(this._successfulSignIn)
        .catch(this._unsuccessfulSignIn);
      }

      signInAnonymously() {
        this.$.auth.signInAnonymously()
        .then(this._successfulSignIn)
        .catch(this._unsuccessfulSignIn);
      }

      signOut() {
        this.$.auth.signOut();
      }

      _signedChanged() {
        this.couldSignIn = !this.user || this.user.isAnonymous;
        this.couldSignOut = this.signedIn && this.user && !this.user.isAnonymous;
      }

      _successfulSignIn(response) {
        // successful authentication response here
        console.log('login', response);
        window.history.pushState({}, null, '/games/list');
        window.dispatchEvent(new CustomEvent('location-changed'));
      }

      _unsuccessfulSignIn(errors) {
        // unsuccessful authentication response here
        console.log('failed', errors);
      }

    }

    window.customElements.define(MemorioHome.is, MemorioHome);
  </script>
</dom-module>
